<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/node_modules/bootstrap/dist/css/bootstrap.min.css">
    <title>编辑信息</title>
</head>
<body>
    <div class="container" style="padding-top:100px;">
        <h2>编辑你的个人信息</h2>
        <form>
        <div class="form-group">
        <label for="email">你的邮箱</label>
        <input type="email" class="form-control" id="email" name="email" value="{{ret.email}}" readonly>
        </div>
        <div class="form-group">
            <label for="name">昵称:</label>
            <input type="text" class="form-control" id="name" name="username" required>
        </div>
        <div class="form-group">
        <label for="pwd">密码:</label>
        <input type="password" class="form-control" id="pwd"  name="password" required>
        </div>
        <input type="submit" class="btn btn-primary" value="提交"">
    </form>
    <a href="/">回到首页</a>
    </div>
    <script src="/node_modules/jquery/dist/jquery.js"></script>
    <script>
         $(function() {
            $('form').on('submit',function(e) {
                e.preventDefault()
                var dataForm = $('form').serialize()
                $.ajax({
                    url: '/edit',
                    method:'post',
                    data: dataForm,
                    success: function(backMessage) {
                        var status = backMessage.errcode
                        if(status === 500){
                            window.alert(backMessage.message)
                        }
                        else if(status === 0) {
                            window.alert(backMessage.message)
                        }
                        else{
                            window.alert(backMessage.message)
                            window.location.href = '/'
                        }
                    }
                })
            })
        })
    </script>
</body>
</html>